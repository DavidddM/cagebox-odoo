acl localnet src 172.16.0.0/12
acl localnet src 10.0.0.0/8

acl SSL_ports port 443
acl Safe_ports port 80
acl Safe_ports port 443

acl whitelist dstdomain pypi.org
acl whitelist dstdomain files.pythonhosted.org
acl whitelist dstdomain registry.npmjs.org
acl whitelist dstdomain api.anthropic.com
acl whitelist dstdomain github.com
acl whitelist dstdomain codeload.github.com
acl whitelist dstdomain objects.githubusercontent.com
acl whitelist dstdomain astral.sh
acl whitelist dstdomain platform.claude.com
acl whitelist dstdomain claude.ai
acl whitelist dstdomain auth.anthropic.com
acl whitelist dstdomain console.anthropic.com
acl whitelist dstdomain statsigapi.net
acl whitelist dstdomain sentry.io

http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow localnet whitelist
http_access deny all

http_port 3128

access_log /var/log/squid/access.log
cache_log /var/log/squid/cache.log
